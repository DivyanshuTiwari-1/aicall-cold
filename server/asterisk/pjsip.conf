[global]
type=global
endpoint_identifier_order=ip,username,anonymous

[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060

[transport-tcp]
type=transport
protocol=tcp
bind=0.0.0.0:5060

; Telnyx SIP Trunk Configuration
[telnyx_endpoint]
type=endpoint
transport=transport-udp
context=ai-dialer-outbound
disallow=all
allow=ulaw,alaw,g722,g729
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
from_user=${TELNYX_USERNAME}
from_domain=${TELNYX_DOMAIN}
auth=${TELNYX_USERNAME}
aors=telnyx_aor
callerid="AI Dialer" <${TELNYX_CALLER_ID}>
callerid_privacy=allowed_not_screened
callerid_tag=ai-dialer
dtmf_mode=rfc4733
dtmf_send_mode=rfc4733
send_pai=yes
send_rpid=yes
trust_id_inbound=yes
trust_id_outbound=yes

[telnyx_aor]
type=aor
contact=sip:${TELNYX_SIP_URI}
qualify_frequency=30
qualify_timeout=3
remove_existing=yes
maximum_contacts=1
remove_unavailable=yes

[telnyx_auth]
type=auth
auth_type=userpass
username=${TELNYX_USERNAME}
password=${TELNYX_PASSWORD}

[telnyx_identify]
type=identify
endpoint=telnyx_endpoint
match=${TELNYX_IP_RANGE}

; Telnyx Inbound Configuration
[telnyx_inbound_endpoint]
type=endpoint
transport=transport-udp
context=ai-dialer-inbound
disallow=all
allow=ulaw,alaw,g722,g729
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
trust_id_inbound=yes
trust_id_outbound=yes
callerid_privacy=allowed_not_screened

[telnyx_inbound_identify]
type=identify
endpoint=telnyx_inbound_endpoint
match=${TELNYX_IP_RANGE}

; Local endpoint for testing
[local_endpoint]
type=endpoint
transport=transport-udp
context=ai-dialer
disallow=all
allow=ulaw,alaw,g722
direct_media=no
