; Asterisk dialplan for Telnyx outbound and ARI app
; Replace <YOUR_DID_E164> with a DID you purchased at Telnyx

[globals]
OUT_TRUNK=telnyx_endpoint

[from-internal]
; Dial E.164 numbers directly (e.g., +4420...)
exten => _+X.,1,NoOp(Dialing international: ${EXTEN})
 same => n,Set(CALLERID(num)=+12025550123)
 same => n,Dial(PJSIP/${EXTEN}@${OUT_TRUNK},60)
 same => n,Hangup()

; Originate target from ARI app "ai-dialer"
exten => ai-dialer,1,NoOp(Outbound via ARI)
 same => n,GotoIf($["${ARG1}" = ""]?hangup)
 same => n,Set(TARGET=${ARG1})
 same => n,Dial(PJSIP/${TARGET}@${OUT_TRUNK},60)
 same => n,Hangup()
 same => n(hangup),Hangup()

[from-telnyx]
exten => s,1,NoOp(Inbound from Telnyx)
 same => n,Hangup() ; route inbound if needed

